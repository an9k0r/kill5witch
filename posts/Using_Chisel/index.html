<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Using Chisel" /><meta name="author" content="kill5witch" /><meta property="og:locale" content="en" /><meta name="description" content="Reverse and Bind Proxy using Chisel // There is no exploitation involved!" /><meta property="og:description" content="Reverse and Bind Proxy using Chisel // There is no exploitation involved!" /><link rel="canonical" href="https://an9k0r.github.io/posts/Using_Chisel/" /><meta property="og:url" content="https://an9k0r.github.io/posts/Using_Chisel/" /><meta property="og:site_name" content="CyberSec-Research.Space" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-25T10:33:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Using Chisel" /><meta name="twitter:site" content="@cybersec_space" /><meta name="twitter:creator" content="@kill5witch" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"kill5witch"},"description":"Reverse and Bind Proxy using Chisel // There is no exploitation involved!","headline":"Using Chisel","dateModified":"2022-05-19T09:58:23+02:00","url":"https://an9k0r.github.io/posts/Using_Chisel/","datePublished":"2021-12-25T10:33:00+01:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://an9k0r.github.io/posts/Using_Chisel/"},"@context":"https://schema.org"}</script><title>Using Chisel | CyberSec-Research.Space</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="CyberSec-Research.Space"><meta name="application-name" content="CyberSec-Research.Space"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/images/logo.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">CyberSec-Research.Space</a></div><div class="site-subtitle font-italic">Information Security Personal Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/blogging/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BLOGS AND GUIDES</span> </a><li class="nav-item"> <a href="/hack_the_box/" class="nav-link"> <i class="fa-fw fas fa-bug ml-xl-3 mr-xl-3 unloaded"></i> <span>HACK THE BOX</span> </a><li class="nav-item"> <a href="/blue_team_ctf/" class="nav-link"> <i class="fa-fw fas fa-anchor ml-xl-3 mr-xl-3 unloaded"></i> <span>BLUE TEAM CTFS</span> </a><li class="nav-item"> <a href="/web_application/" class="nav-link"> <i class="fa-fw fas fa-terminal ml-xl-3 mr-xl-3 unloaded"></i> <span>WEB APPLICATION</span> </a><li class="nav-item"> <a href="/binary_exploitation/" class="nav-link"> <i class="fa-fw fas fa-microchip ml-xl-3 mr-xl-3 unloaded"></i> <span>BINARY EXPLOITATION</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/an9k0r" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/cybersec_space" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Using Chisel</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Using Chisel</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/an9k0r">kill5witch</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-12-25 10:33:00 +0100" data-toggle="tooltip" data-placement="bottom" title="Sat, Dec 25, 2021, 10:33 AM +0100" >Dec 25, 2021</em> </span> <span> Updated <em class="timeago" date="2022-05-19 09:58:23 +0200 " data-toggle="tooltip" data-placement="bottom" title="Thu, May 19, 2022, 9:58 AM +0200" >May 19, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="875 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p><strong>Reverse and Bind Proxy using Chisel // There is no exploitation involved!</strong></p><h1 id="lab-setup-">Lab Setup <a href="#lab-setup" id="lab-setup"></a></h1><p><img data-src="https://gblobscdn.gitbook.com/assets%2F-MIxcYhWyGCoV7j2xCX\_%2F-MMMa\_l\_gM83qoxbcIyz%2F-MMMakUk24zIFBd6Wnmp%2Fimage.png?alt=media\&amp;token=aba8c540-8cb6-4ee8-a89e-12acd5c029b6" alt="" data-proofer-ignore></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>Kali = 192.168.40.214 
Win7 / Pivot#1 Interface#1 = 192.168.40.217 
Win7 / Pivot#1 Interface#2 = 192.168.118.176 
Linux Server / Pivot#2 interface#1 = 192.168.118.132 
Linux Server / Pivot#2 Interface #2 = 192.168.50.129 
WebServer = 192.168.50.128
</pre></table></code></div></div><h1 id="download-and-installation">Download and Installation</h1><p>Chisel can be downloaded here: <a href="https://github.com/jpillora/chisel">https://github.com/jpillora/chisel</a></p><p>Simply follow instructions there to download chisel - you will also need GO. Move to the directory where you’ve downloaded the chisel.</p><p>Build it without debug</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>go build -ldflags="-s -w" chisel
</pre></table></code></div></div><p>Compress it even further</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>upx brute chisel
</pre></table></code></div></div><p>You don’t have to build it for Windows if you won’t be using/pivoting windows boxes but here is how it can be done:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>#x86 version
env GOOS=windows GOARCH=386 go build -o chisel-x86.exe -ldflags "-s -w"

#x64 version
env GOOS=windows GOARCH=amd64 go build -o chisel-x64.exe -ldflags "-s -w" 

#(optional - compress it)
upx brute ./chisel-x86.exe
upx brute ./chisel-x64.exe
</pre></table></code></div></div><h1 id="bind-proxy">Bind Proxy</h1><p><strong>(Exfiltration Scenario - send data through Pivot#1 (Win7) to Kali where there is no direct access from e.g. corporate network)* This is however just one use case</strong></p><p><img data-src="../.gitbook/assets/image (103).png" alt="" data-proofer-ignore></p><p>So, lets begin setting server on kali:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>chisel server --host 192.168.40.214 -p 4000
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8WqG6f-2T5jMQS%2F0.png?alt=media" alt="" data-proofer-ignore></p><p>You can see above on the right that Port 4000 has been opened on the chisel Server (on Kali) and is listening. This is common to both reverse and bind Proxy.</p><p>Listener will be opened on the Windows7/Pivot#1 Machine</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>chisel-x86.exe client 192.168.40.214:4000 8001:127.0.0.1:9001
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8XzWmxbpSN0wWc%2F1.png?alt=media" alt="" data-proofer-ignore></p><p>Now here is important to understand what the second part of command <em>8001:127.0.0.1:9001</em> actually means. Port 8001 has been opened on the Client (Win7 Machine) and is listening on ALL Interfaces (0.0.0.0). Traffic will be relayed to 127.0.0.1:9001 (on the Server - which is Kali)</p><p>I am now able to send anything to Port 8001 on ANY Interface on the Client/Win7 (192.168.40.217 OR 192.168.118.132 OR 127.0.0.1) on port 8001. This will get piped through the Chisel tunnel to 127.0.0.1 on Kali to port</p><p>All that is needed to do is, set a listener on Kali on port 9001</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8ZcKU5NbKrOOP1%2F3.png?alt=media" alt="" data-proofer-ignore></p><p>I am now able to send anything to Kali over Win7 tunnel</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8\_zyQpD5b43EdJ%2F4.png?alt=media" alt="" data-proofer-ignore></p><h1 id="reverse-"><strong>Reverse</strong> <a href="#reverse" id="reverse"></a></h1><h2 id="simple-reverse-port-forward--single-pivot">Simple Reverse Port Forward / Single Pivot<a href="#simple-reverse-port-forward--single-pivot" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>The biggest difference compared to bind proxy is where the listener will reside at, and that is on the server. The tunnel connection will also get initated from the victim/Pivot#1/win7.</p><p>Lets start chisel server on Kali</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>chisel server --host 192.168.40.214 -p 4000 --reverse
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8dtSSrSmxKRMpt%2F8.png?alt=media" alt="" data-proofer-ignore></p><p>… and client on the Win7 which will be 1st Pivot machine. The second part of command <em>R:4001:192.168.118.132:80</em> also defines where the connection will be proxied to which is 192.168.118.132:80 (Linux Server / Pivot#2). (R: we have to define R for reverse connections)</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>chisel 192.168.40.214:4000 R:4001:192.168.118.132:80
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8ecIh9POKFORbY%2F9.png?alt=media" alt="" data-proofer-ignore></p><p>The listener is now on Kali - when using Bind Proxy the listener will be on the Client (in my case on Win7/Pivot#1)</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8fXRT8DuO96fis%2F10.png?alt=media" alt="" data-proofer-ignore></p><p>Test - i am able to reach Linux Server on Port 80 from Kali through Win7/Pivot#1</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8gPpsqXNDLWeZZ%2F11.png?alt=media" alt="" data-proofer-ignore></p><h2 id="double-pivot-using-socks">Double Pivot using SOCKS<a href="#double-pivot-using-socks" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>In order to reach Webserver which is 2 “hops” away i need to pivot through Win7/Pivot#1 and Linux Server/Pivot#2. (i have chisel on both already - there is no Exploitation involved).</p><p>!Important! - If you can get first pivot setup correctly, setting the 2nd one is basically doing exactly the same BUT keep in mind that you either need more than 1 session (if you’re using SSH / Shell / meterpreter/ whatever) or send chisel processes to background (for example: start-process on window or ampersand in linux).</p><p>Lets start reverse server with adding –socks5</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>chisel server --host 192.168.40.214 -p 4000 --socks5 --reverse
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8h0jxHH1Sgh-Wk%2F12.png?alt=media" alt="" data-proofer-ignore></p><p>On Win7/Pivot#1 we have to specify the local listener (which will be on Kali). I used Port 3080</p><p>Pivot#1</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8iqzpCGR9U6\_us%2F13.png?alt=media" alt="" data-proofer-ignore></p><p>And start a server just like we did on Kali</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8j6kU6B6V4CuOb%2F14.png?alt=media" alt="" data-proofer-ignore></p><p>On Pivot#2/Linux Server we start a client but its important to pay attention to listeners interface (192.168.118.176 is Interface on Pivot#1 and will be reachable after Kali connects through the first socks proxy).</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8knIa45CB68qdw%2F15.png?alt=media" alt="" data-proofer-ignore></p><p>(again, the listener and its interface will be defined on the client which means - i have to define listener for socky proxy on Pivot#2 for Pivot#1).</p><p>Lets add following two proxys to /etc/proxychains on Kali</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>socks5 127.0.0.1 3080
socks5 192.168.118.176 7080
</pre></table></code></div></div><p>And i can reach webserver on 192.168.50.128:80</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8lTfSWQ-YCnjuv%2F16.png?alt=media" alt="" data-proofer-ignore></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>|S-chain|-&lt;&gt;-127.0.0.1:3080-&lt;&gt;-192.168.118.176:7080-&lt;&gt;&lt;&gt;-192.168.50.128:80-&lt;&gt;&lt;&gt;-OK
</pre></table></code></div></div><h2 id="using-reverse-to-download-chisel-on-pivot2-from-kali-no-direct-access"><strong>Using Reverse to download chisel on Pivot#2 from Kali (no direct access)</strong><a href="#using-reverse-to-download-chisel-on-pivot2-from-kali-no-direct-access" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Lets say i want to download something from the Kali (for example the chisel itself) over Pivot#1 which is in my case Win7.</p><p>Now the roles over server/client are swaped so Pivot#1 (Win7) will be server and Kali will be set as a client.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>chisel-x86.exe server -p 5000 --reverse # on Pivot#1 (Win7)
chisel client 192.168.40.217:5000 4001:127.0.0.1:9001 # on Kali
</pre></table></code></div></div><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8acP58DRWhkTfd%2F5.png?alt=media" alt="" data-proofer-ignore></p><p>Connection from Linux Server will now go through Pivot#1 (Win7) and if i set a webserver on Kali on port 8000 the file will be downloaded</p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8bg7QccLJhY5zQ%2F6.png?alt=media" alt="" data-proofer-ignore></p><p><img data-src="https://gblobscdn.gitbook.com/assets%2Fos-cybersec%2F-MM5rry18v5IEAyTMx07%2F-MM5tW8cMiCcf3naph9x%2F7.png?alt=media" alt="" data-proofer-ignore></p><h1 id="summary-">Summary <a href="#summary" id="summary"></a></h1><p>Chisel is a great tool no doubts on that but the message i’d like to put out there is: Practice Pivoting in your own lab because it is easier to troubleshoot if somethings does not work as expected. I used 3 VMs (doesnt really matter if Linux or Windows).</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tunneling/" class="post-tag no-text-decoration" >Tunneling</a> <a href="/tags/pivoting/" class="post-tag no-text-decoration" >Pivoting</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Using Chisel - CyberSec-Research.Space&url=https://an9k0r.github.io/posts/Using_Chisel/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Using Chisel - CyberSec-Research.Space&u=https://an9k0r.github.io/posts/Using_Chisel/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Using Chisel - CyberSec-Research.Space&url=https://an9k0r.github.io/posts/Using_Chisel/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/insecure_deserialization/">(Portswigger/WebAcademy) - Insecure Deserialization vulnerabilities</a><li><a href="/posts/ssti/">(Portswigger/WebAcademy) - Server-Side Template Injection vulnerabilities</a><li><a href="/posts/stored_XSS/">(Portswigger/WebAcademy) - Stored Cross-Site Scripting (XSS)</a><li><a href="/posts/Blind_SQL_Injection/">Blind SQL Injection</a><li><a href="/posts/OS_Command_Injection/">OS Command Injection</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/notes/">Notes</a> <a class="post-tag" href="/tags/portswigger/">Portswigger</a> <a class="post-tag" href="/tags/web-application/">Web Application</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/clear-text-credentials/">Clear Text Credentials</a> <a class="post-tag" href="/tags/password-reuse/">Password Reuse</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/deserialization/">Deserialization</a> <a class="post-tag" href="/tags/misconfiguration/">Misconfiguration</a> <a class="post-tag" href="/tags/password-cracking/">Password Cracking</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Bucket/"><div class="card-body"> <em class="timeago small" date="2022-09-15 11:33:00 +0200" >Sep 15, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bucket</h3><div class="text-muted small"><p> Bucket is medium rated linux box, which is mostly about exploiting common bucket miscofigurations. Bucket is based on AWS technology(DynamoDB,S3) ENUMERATION NMAP Let’s start NMAP: 1 2 3 4 5 6 7 ...</p></div></div></a></div><div class="card"> <a href="/posts/CVE_2021_4034/"><div class="card-body"> <em class="timeago small" date="2021-12-25 10:33:00 +0100" >Dec 25, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Local Privilege Escalation in polkit's pkexec (CVE-2021-4034)</h3><div class="text-muted small"><p> PwnKit (CVE-2021-4034) - Local Privilege Escalation This will be a short one. It’s about local privilege escalation vulnerability (CVE-2021-4034) with public available exploit named PwnKit. Origi...</p></div></div></a></div><div class="card"> <a href="/posts/CVE_2021_44228/"><div class="card-body"> <em class="timeago small" date="2021-12-25 10:33:00 +0100" >Dec 25, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>LOG4J Exploit - Revese Shell (CVE-2021-44228)</h3><div class="text-muted small"><p> Simple PoC against simple Java Springboot App Setting up DOCKER “Victim” Java App w. LOG4J Download the vulnerable App. https://github.com/christophetd/log4shell-vulnerable-app Kudos for making ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/CVE_2021_44228/" class="btn btn-outline-primary" prompt="Older"><p>LOG4J Exploit - Revese Shell (CVE-2021-44228)</p></a> <a href="/posts/WIN_Series_Install_Splunk/" class="btn btn-outline-primary" prompt="Newer"><p>Installing Splunk Enterprise on CentOS 7 and Universal Forwarder on Windows with Sysmon</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/cybersec_space">eng4ge</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/notes/">Notes</a> <a class="post-tag" href="/tags/portswigger/">Portswigger</a> <a class="post-tag" href="/tags/web-application/">Web Application</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/clear-text-credentials/">Clear Text Credentials</a> <a class="post-tag" href="/tags/password-reuse/">Password Reuse</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/deserialization/">Deserialization</a> <a class="post-tag" href="/tags/misconfiguration/">Misconfiguration</a> <a class="post-tag" href="/tags/password-cracking/">Password Cracking</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script>
